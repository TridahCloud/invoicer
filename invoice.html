<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Invoice - Invoicer</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/invoice.css">
    <link rel="stylesheet" href="assets/css/customize.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="invoice-body">
    <div class="toolbar">
        <div class="toolbar-left">
            <a href="index.html" class="toolbar-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Back
            </a>
            <span class="toolbar-title">Invoice Creator</span>
        </div>
        <div class="toolbar-right">
            <button class="toolbar-btn" id="customizeBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/>
                </svg>
                Customize
            </button>
            <button class="toolbar-btn" id="saveBtn" style="display: none;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <polyline points="17 21 17 13 7 13 7 21"/>
                    <polyline points="7 3 7 8 15 8"/>
                </svg>
                Save
            </button>
            <button class="toolbar-btn" id="downloadBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                Download PDF
            </button>
            <button class="toolbar-btn toolbar-btn-primary" id="printBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 6 2 18 2 18 9"/>
                    <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                    <rect x="6" y="14" width="12" height="8"/>
                </svg>
                Print
            </button>
        </div>
    </div>

    <!-- Customization Sidebar -->
    <div class="customize-sidebar" id="customizeSidebar">
        <div class="customize-header">
            <h3>Customize Invoice</h3>
            <button class="close-customize" id="closeCustomize">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="customize-content">
            <div class="customize-section">
                <h4>Header Elements</h4>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-logo" checked>
                    <span>Show Logo</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-invoice-number" checked>
                    <span>Show Invoice Number</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-issue-date" checked>
                    <span>Show Issue Date</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-due-date" checked>
                    <span>Show Due Date</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-status" checked>
                    <span>Show Status (Logged in only)</span>
                </label>
            </div>
            
            <div class="customize-section">
                <h4>Company Information</h4>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-company-address" checked>
                    <span>Show Company Address</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-company-email" checked>
                    <span>Show Company Email</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-company-phone" checked>
                    <span>Show Company Phone</span>
                </label>
            </div>
            
            <div class="customize-section">
                <h4>Client Information</h4>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-client-section" checked>
                    <span>Show Bill To Section</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-client-address" checked>
                    <span>Show Client Address</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-client-email" checked>
                    <span>Show Client Email</span>
                </label>
            </div>
            
            <div class="customize-section">
                <h4>Invoice Sections</h4>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-notes" checked>
                    <span>Show Notes/Terms Section</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-bank-details" checked>
                    <span>Show Bank Details</span>
                </label>
                <label class="toggle-option">
                    <input type="checkbox" id="toggle-footer" checked>
                    <span>Show Footer (Powered by...)</span>
                </label>
            </div>
        </div>
    </div>

    <div class="invoice-workspace">
        <div class="a4-page" id="invoicePage">
            <!-- Invoice Header -->
            <div class="invoice-header">
                <div class="company-info">
                    <div class="logo-upload section-toggleable" id="logoUpload" data-section="logo">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <span>Add Logo</span>
                    </div>
                    <h1 class="company-name editable" contenteditable="true" data-placeholder="Your Company Name">Your Company Name</h1>
                    <div class="section-toggleable" data-section="company-address">
                        <p class="company-detail editable" contenteditable="true" data-placeholder="123 Business Street">123 Business Street</p>
                        <p class="company-detail editable" contenteditable="true" data-placeholder="City, State 12345">City, State 12345</p>
                    </div>
                    <p class="company-detail editable section-toggleable" contenteditable="true" data-placeholder="email@company.com" data-section="company-email">email@company.com</p>
                    <p class="company-detail editable section-toggleable" contenteditable="true" data-placeholder="(555) 123-4567" data-section="company-phone">(555) 123-4567</p>
                </div>
                
                <div class="invoice-meta">
                    <h2 class="invoice-title">INVOICE</h2>
                    <div class="meta-row section-toggleable" data-section="invoice-number">
                        <span class="meta-label">Invoice #</span>
                        <span class="meta-value editable" contenteditable="true" data-placeholder="INV-001">INV-001</span>
                    </div>
                    <div class="meta-row section-toggleable" data-section="issue-date">
                        <span class="meta-label">Date</span>
                        <input type="date" class="meta-value date-input" id="issueDate">
                    </div>
                    <div class="meta-row section-toggleable" data-section="due-date">
                        <span class="meta-label">Due Date</span>
                        <input type="date" class="meta-value date-input" id="dueDate">
                    </div>
                    <div class="meta-row section-toggleable" id="statusRow" data-section="status" style="display: none;">
                        <span class="meta-label">Status</span>
                        <select class="meta-value status-select" id="statusSelect">
                            <option value="draft">Draft</option>
                            <option value="sent">Sent</option>
                            <option value="paid">Paid</option>
                            <option value="overdue">Overdue</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Bill To Section -->
            <div class="bill-to section-toggleable" data-section="client-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <h3 class="section-label" style="margin-bottom: 0;">Bill To:</h3>
                    <button type="button" class="btn-import-client" id="importClientBtn" style="display: none;" title="Import from saved clients">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px;">
                            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                        </svg>
                        Import Client
                    </button>
                </div>
                <p class="client-name editable" contenteditable="true" data-placeholder="Client Name">Client Name</p>
                <div class="section-toggleable" data-section="client-address">
                    <p class="client-detail editable" contenteditable="true" data-placeholder="Client Address">Client Address</p>
                    <p class="client-detail editable" contenteditable="true" data-placeholder="City, State ZIP">City, State ZIP</p>
                </div>
                <p class="client-detail editable section-toggleable" contenteditable="true" data-placeholder="client@email.com" data-section="client-email">client@email.com</p>
            </div>

            <!-- Items Table -->
            <table class="items-table">
                <thead>
                    <tr>
                        <th class="col-description">Description</th>
                        <th class="col-qty">Qty</th>
                        <th class="col-unit">Unit</th>
                        <th class="col-rate">Rate</th>
                        <th class="col-amount">Amount</th>
                        <th class="col-action"></th>
                    </tr>
                </thead>
                <tbody id="itemsBody">
                    <tr class="item-row" data-row="1">
                        <td>
                            <div class="editable item-description" contenteditable="true" data-placeholder="Service or product description">
                                Content Writing
                            </div>
                        </td>
                        <td>
                            <input type="number" class="item-input item-qty" value="10" min="0" step="1">
                        </td>
                        <td>
                            <input type="text" class="item-input item-unit" value="100 words" placeholder="items">
                        </td>
                        <td>
                            <div class="currency-input">
                                <span class="currency-symbol">$</span>
                                <input type="number" class="item-input item-rate" value="1.00" min="0" step="0.01">
                            </div>
                        </td>
                        <td>
                            <div class="item-amount">$10.00</div>
                        </td>
                        <td>
                            <button class="btn-remove" title="Remove item">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"/>
                                    <line x1="6" y1="6" x2="18" y2="18"/>
                                </svg>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <button class="btn-add-item" id="addItemBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                Add Line Item
            </button>

            <!-- Item Library (for logged-in users) -->
            <div class="item-library" id="itemLibrary" style="display: none;">
                <h4>Quick Add Items</h4>
                <div class="library-items" id="libraryItems">
                    <!-- Items will be populated here for logged-in users -->
                </div>
            </div>

            <!-- Totals Section -->
            <div class="totals-section">
                <div class="totals-row">
                    <span class="totals-label">Subtotal</span>
                    <span class="totals-value" id="subtotalValue">$10.00</span>
                </div>
                <div class="totals-row">
                    <span class="totals-label">Tax 
                        <input type="number" class="tax-input" id="taxRate" value="0" min="0" max="100" step="0.1">%
                    </span>
                    <span class="totals-value" id="taxValue">$0.00</span>
                </div>
                <div class="totals-row totals-total">
                    <span class="totals-label">Total</span>
                    <span class="totals-value" id="totalValue">$10.00</span>
                </div>
            </div>

            <!-- Notes Section -->
            <div class="notes-section section-toggleable" data-section="notes">
                <h3 class="section-label">Notes / Payment Terms:</h3>
                <div class="editable notes-content" contenteditable="true" data-placeholder="Add any additional notes, payment terms, or thank you message here...">
                    Payment is due within 30 days. Thank you for your business!
                </div>
            </div>

            <!-- Bank Details Section -->
            <div class="bank-details-section section-toggleable" data-section="bank-details" id="bankDetailsSection">
                <h3 class="section-label">Payment Details:</h3>
                <div class="bank-details-grid">
                    <div class="bank-detail-row">
                        <span class="bank-detail-label">Bank:</span>
                        <span class="bank-detail-value editable" contenteditable="true" data-placeholder="Bank Name" id="bankName"></span>
                    </div>
                    <div class="bank-detail-row">
                        <span class="bank-detail-label">Account Name:</span>
                        <span class="bank-detail-value editable" contenteditable="true" data-placeholder="Account Name" id="bankAccountName"></span>
                    </div>
                    <div class="bank-detail-row">
                        <span class="bank-detail-label editable" contenteditable="true" data-placeholder="Routing Number" id="bankRoutingLabel">Routing Number:</span>
                        <span class="bank-detail-value editable" contenteditable="true" data-placeholder="000000000" id="bankRoutingNumber"></span>
                    </div>
                    <div class="bank-detail-row">
                        <span class="bank-detail-label">Account Number:</span>
                        <span class="bank-detail-value editable" contenteditable="true" data-placeholder="0000000000" id="bankAccountNumber"></span>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="invoice-footer section-toggleable" data-section="footer">
                <p class="footer-note">Powered by Invoicer - Free invoice generator by Tridah</p>
            </div>
        </div>
    </div>

    <!-- Hidden file input for logo upload -->
    <input type="file" id="logoInput" accept="image/*" style="display: none;">

    <!-- Overlay for customize sidebar -->
    <div class="customize-overlay" id="customizeOverlay"></div>

    <!-- Client Import Modal -->
    <div class="customize-overlay" id="clientImportOverlay"></div>
    <div class="customize-sidebar" id="clientImportSidebar">
        <div class="customize-header">
            <h3>Select Client</h3>
            <button class="close-customize" id="closeClientImport">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="customize-content">
            <div class="client-list" id="clientImportList">
                <!-- Clients will be loaded here -->
            </div>
        </div>
    </div>

    <script src="assets/js/invoice.js"></script>
</body>
</html>

<script src="https://tridah.cloud/tridah-widget.js"></script>